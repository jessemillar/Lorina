<html>
	<head>
		<title>Lorina</title>
		<style>
			html, body
			{
				padding: 0px;
				margin: 0px;
			}

			#canvas
			{
				position: absolute;
				left: 50%;
				top: 50%;
				margin-left: -200px;
				margin-top: -150px;
				z-index: 0;
			}
		</style>
		<script src = "../lorina.js"></script>
		<script src = "../lorina-audio.js"></script>
		<script src = "../lorina-collisions.js"></script>
		<script src = "../lorina-draw.js"></script>
		<script src = "../lorina-keyboard.js"></script>
		<script src = "../lorina-mouse.js"></script>
		<script src = "../lorina-objects.js"></script>
		<script src = "../lorina-preloader.js"></script>
		<script src = "../lorina-text.js"></script>
		<script src = "../lorina-touches.js"></script>
	</head>
	<body>
		<canvas id = "canvas" width = "400px" height = "300px"></canvas>
	</body>
	<script>
		var colorBlue = '#1C73E9'
		var colorGreen = '#5CBE43'
		var colorGreenDark = '#34881F'
		var colorBrown = '#7D4F16'

		var dragonSpeed = 150
		var movementPadding = 15
		var boneY = 280
		var boneSpacing = 15

		l.game.setup(colorBlue)
		l.keyboard.enable()

		l.object.make('dragon', 50, 220, 18, 20)
			l.object.sprite('dragon', 'images/dragon.png', 34, 20, 2, 300)
			l.object.anchor('dragon', 18 / 2, 20)
			l.object.bounding('dragon', 0, 0, 18, 20)
		l.object.make('meteor', 50, 50, 12, 21)
			l.object.sprite('meteor', 'images/meteor.png', 24, 21, 2, 100)
			l.object.anchor('meteor', 12 / 2, 21)
			l.object.bounding('meteor', 0, 0, 12, 21)
		l.object.make('bone1', l.entities.camera.width / 2 - boneSpacing * 2, boneY, 11, 11)
			l.object.sprite('bone1', 'images/bone.png', 11, 11)
			l.object.anchor('bone1', 11 / 2, 11 / 2)
		l.object.make('bone2', l.entities.camera.width / 2 - boneSpacing, boneY, 11, 11)
			l.object.sprite('bone2', 'images/bone.png', 11, 11)
			l.object.anchor('bone2', 11 / 2, 11 / 2)
		l.object.make('bone3', l.entities.camera.width / 2, 280, 11, 11)
			l.object.sprite('bone3', 'images/bone.png', 11, 11)
			l.object.anchor('bone3', 11 / 2, 11 / 2)
		l.object.make('bone4', l.entities.camera.width / 2 + boneSpacing, boneY, 11, 11)
			l.object.sprite('bone4', 'images/bone.png', 11, 11)
			l.object.anchor('bone4', 11 / 2, 11 / 2)
		l.object.make('bone5', l.entities.camera.width / 2 + boneSpacing * 2, boneY, 11, 11)
			l.object.sprite('bone5', 'images/bone.png', 11, 11)
			l.object.anchor('bone5', 11 / 2, 11 / 2)

		l.game.start() // Start the game which fires the preloader which then "starts" the game via a variable change after all images are loaded

		function game()
		{
			if (l.game.state == 'loading')
			{
				l.draw.blank()
				l.text.write(l.preloader.percent + '% loaded', 10, l.entities.camera.height - 10, '#ffffff')
			}
			else if (l.game.state == 'running')
			{
			    if (l.keyboard.left)
			    {
			    	if (l.entities.dragon.anchor.x > movementPadding)
			    	{
			  			l.move.left('dragon', dragonSpeed)
			    	}
			    }
			    else if (l.keyboard.right)
			    {
			    	if (l.entities.dragon.anchor.x < l.entities.camera.width - movementPadding)
			    	{
				        l.move.right('dragon', dragonSpeed)
				    }
			    }

				l.draw.blank()
				l.draw.rectangle(0, 185, l.entities.camera.width, 70, colorGreen) // Grass
				l.draw.rectangle(0, 255, l.entities.camera.width, 5, colorGreenDark) // Darker grass
				l.draw.rectangle(0, 260, l.entities.camera.width, 40, colorBrown) // Dirt
				l.draw.object('meteor')
				l.draw.object('dragon')
				l.draw.object('bone1')
				l.draw.object('bone2')
				l.draw.object('bone3')
				l.draw.object('bone4')
				l.draw.object('bone5')
			}
		}
	</script>
</html>